(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-24d90598"],{"0c5f":function(t,s,e){"use strict";e("5e1b")},"5e1b":function(t,s,e){},d539:function(t,s,e){"use strict";e.r(s);var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"root"},[e("br"),e("el-card",{attrs:{shadow:"never"}},[e("div",{staticStyle:{width:"100%",display:"flex","flex-direction":"row","align-items":"center","justify-content":"space-between"},attrs:{slot:"header"},slot:"header"},[e("span",[t._v("pforward edit")]),t.$route.params.isNew?e("el-button",{staticClass:"reset-btn",attrs:{size:"small"},on:{click:t.onSave}},[t._v(" Save ")]):t._e()],1),e("div",{staticClass:"card-panel-editable-content-wrapper"},[e("div",{staticClass:"field-row",class:{highlight:"enabled"===t.hash}},[e("div",{staticClass:"field-key"},[e("span",{staticClass:"field-key-text"},[t._v("Enable")])]),e("div",{staticClass:"field-value"},[e("div",{staticClass:"field-value-column"},[e("div",{staticClass:"field-value-column-input"},[e("el-checkbox",{attrs:{"true-label":"1","false-label":"0"},model:{value:t.settings.enabled,callback:function(s){t.$set(t.settings,"enabled",s)},expression:"settings.enabled"}})],1)])])]),e("div",{staticClass:"field-row",class:{highlight:"name"===t.hash}},[e("div",{staticClass:"field-key"},[e("span",{staticClass:"field-key-text"},[t._v("name")])]),e("div",{staticClass:"field-value"},[e("div",{staticClass:"field-value-column"},[e("div",{staticClass:"field-value-column-input"},[e("el-input",{attrs:{sizi:"small"},model:{value:t.settings.name,callback:function(s){t.$set(t.settings,"name",s)},expression:"settings.name"}})],1)])])]),e("div",{staticClass:"field-row",class:{highlight:"src"===t.hash}},[e("div",{staticClass:"field-key"},[e("span",{staticClass:"field-key-text"},[t._v("src")])]),e("div",{staticClass:"field-value"},[e("div",{staticClass:"field-value-column"},[e("div",{staticClass:"field-value-column-input"},[e("el-select",{staticStyle:{width:"100%"},attrs:{size:"mini"},model:{value:t.settings.src,callback:function(s){t.$set(t.settings,"src",s)},expression:"settings.src"}},[e("el-option",{attrs:{value:"lan",label:"lan"}}),e("el-option",{attrs:{value:"wan",label:"wan"}})],1)],1)])])]),e("div",{staticClass:"field-row",class:{highlight:"dest"===t.hash}},[e("div",{staticClass:"field-key"},[e("span",{staticClass:"field-key-text"},[t._v("dest")])]),e("div",{staticClass:"field-value"},[e("div",{staticClass:"field-value-column"},[e("div",{staticClass:"field-value-column-input"},[e("el-select",{staticStyle:{width:"100%"},attrs:{size:"small"},model:{value:t.settings.dest,callback:function(s){t.$set(t.settings,"dest",s)},expression:"settings.dest"}},[e("el-option",{attrs:{value:"lan",label:"lan"}}),e("el-option",{attrs:{value:"wan",label:"wan"}})],1)],1)])])]),e("div",{staticClass:"field-row",class:{highlight:"proto"===t.hash}},[e("div",{staticClass:"field-key"},[e("span",{staticClass:"field-key-text"},[t._v("proto")])]),e("div",{staticClass:"field-value"},[e("div",{staticClass:"field-value-column"},[e("div",{staticClass:"field-value-column-input"},[e("el-select",{staticStyle:{width:"100%"},attrs:{size:"mini"},model:{value:t.settings.proto,callback:function(s){t.$set(t.settings,"proto",s)},expression:"settings.proto"}},[e("el-option",{attrs:{value:"tcp",label:"tcp"}}),e("el-option",{attrs:{value:"udp",label:"udp"}}),e("el-option",{attrs:{value:"tcpudp",label:"tcp+udp"}})],1)],1)])])]),e("div",{staticClass:"field-row",class:{highlight:"src_dport"===t.hash}},[e("div",{staticClass:"field-key"},[e("span",{staticClass:"field-key-text"},[t._v("src_dport")])]),e("div",{staticClass:"field-value"},[e("div",{staticClass:"field-value-column"},[e("div",{staticClass:"field-value-column-input"},[e("el-input",{attrs:{type:"number",min:0,max:65535,sizi:"small"},on:{change:t.limitSrcDPortRange},model:{value:t.settings.src_dport,callback:function(s){t.$set(t.settings,"src_dport",s)},expression:"settings.src_dport"}})],1)])])]),e("div",{staticClass:"field-row",class:{highlight:"dest_ip"===t.hash}},[e("div",{staticClass:"field-key"},[e("span",{staticClass:"field-key-text"},[t._v("dest_ip")])]),e("div",{staticClass:"field-value"},[e("div",{staticClass:"field-value-column"},[e("div",{staticClass:"field-value-column-input"},[e("el-input",{attrs:{sizi:"small"},model:{value:t.settings.dest_ip,callback:function(s){t.$set(t.settings,"dest_ip",s)},expression:"settings.dest_ip"}})],1)])])]),e("div",{staticClass:"field-row",class:{highlight:"dest_port"===t.hash}},[e("div",{staticClass:"field-key"},[e("span",{staticClass:"field-key-text"},[t._v("dest_port")])]),e("div",{staticClass:"field-value"},[e("div",{staticClass:"field-value-column"},[e("div",{staticClass:"field-value-column-input"},[e("el-input",{attrs:{type:"number",min:0,max:65535,sizi:"small"},on:{change:t.limitDestPortRange},model:{value:t.settings.dest_port,callback:function(s){t.$set(t.settings,"dest_port",s)},expression:"settings.dest_port"}})],1)])])])])])],1)},a=[],l=e("5530"),n=(e("7db0"),e("b0c0"),e("d3b7"),e("ac1f"),e("5319"),e("ab10")),c=e("2ef0"),d=e("2f62"),o=e("d967"),r={name:"PortForwardsEdit",data:function(){return{hash:"",settings:{src:"",dest:"",proto:"",src_dport:"",dest_ip:"",dest_port:"",name:"",enabled:"1"}}},computed:Object(l["a"])({},Object(d["b"])(["portForwards","originPortForwards"])),watch:{$route:{handler:function(t,s){t.fullPath!==s.fullPath&&this.getData()},deep:!0},settings:{handler:function(t,s){var e=this;if(!this.$route.params.isNew){var i=this.$route.path+"?index="+t.index,a=o["a"].apply(this,[t,this.originPortForwards.find((function(s){return s.index===t.index})),i,function(s,a){return{path:i+s,data:{api:"port-forwards-set",snapshot:c["cloneDeep"](t),name:e.$route.name,updatedKey:s,updateValue:a,routers:[{title:e.$route.path,query:{updatedKey:s,index:t.index},params:{updatedKey:s,index:t.index}}]}}}]);a||(this.hash="")}},deep:!0}},mounted:function(){this.getData(),this.$EventBus.$on("GlobalSaveClick",this.onGlobalSaveClick)},beforeDestroy:function(){this.$EventBus.$off("GlobalSaveClick",this.onGlobalSaveClick)},methods:{limitSrcDPortRange:function(t){t?t>65535?this.settings.src_dport=65535:t<0&&(this.settings.src_dport=0):this.settings.src_dport=0},limitDestPortRange:function(t){t?t>65535?this.settings.dest_port=65535:t<0&&(this.settings.dest_port=0):this.settings.dest_port=0},onGlobalSaveClick:function(){var t=this;setTimeout((function(){t.$router.replace({name:"FirewallIndex"})}),1e3)},getData:function(){this.$route.params.isNew||(this.settings=this.portForwards[this.$route.params.index],this.hash=this.$route.params.updatedKey?this.$route.params.updatedKey:"")},onSave:function(){var t=this,s=this.$loading({lock:!0,text:"Send Request...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),e=c["cloneDeep"](this.settings);Object(n["a"])({pforward:[e]}).then((function(s){t.$message({message:"Success",type:"success"}),t.$store.dispatch("configs/getPortForwards",!0).then((function(){})),setTimeout((function(){t.$router.replace({name:"FirewallIndex"})}),1e3)})).finally((function(){s.close()}))}}},u=r,p=(e("0c5f"),e("2877")),v=Object(p["a"])(u,i,a,!1,null,"d65785ee",null);s["default"]=v.exports},d967:function(t,s,e){"use strict";e.d(s,"a",(function(){return u}));e("caad"),e("b64b"),e("d3b7"),e("2532"),e("159b");const i=t=>t instanceof Date,a=t=>0===Object.keys(t).length,l=t=>null!=t&&"object"===typeof t,n=(t,...s)=>Object.prototype.hasOwnProperty.call(t,...s),c=t=>l(t)&&a(t),d=()=>Object.create(null);const o=(t,s)=>t===s?{}:l(t)&&l(s)?i(t)||i(s)?t.valueOf()==s.valueOf()?{}:s:Object.keys(s).reduce((e,a)=>{if(n(t,a)){const l=o(t[a],s[a]);return!c(l)||i(l)||!c(t[a])&&c(s[a])?(e[a]=l,e):e}return e},d()):s;var r=o;function u(t,s,e,i){var a=this,l=r(t,s),n=Object.keys(l);return Object.keys(s).forEach((function(t){n.includes(t)||p.apply(a,[e+t])})),n.forEach((function(s){a.$store.dispatch("app/addRowToUnSaved",i(s,t[s]))})),n.length>0}function p(t){this.$store.dispatch("app/delRowFromUnSaved",t)}}}]);